{"version":3,"file":"script.js","sources":["src/scripts/component.js"],"sourcesContent":["import '../styles/component.scss';\n\nimport Sortable from 'sortablejs';\n\nconst DEFAULT = {\n\tcontainerId: '',\n\tcontrolName: '',\n\toptionId: '',\n\tajaxReload: true,\n};\n\nexport class RedsignTuningOptionDnD\n{\n\tcontainer = null;\n\telements = [];\n\n\tconstructor(options = {})\n\t{\n\t\tthis.options = {...DEFAULT, ...options};\n\n\t\tdocument.addEventListener(\"DOMContentLoaded\", this.init.bind(this));\n\t}\n\n\tinit()\n\t{\n\t\tthis.container = document.getElementById(this.options.containerId);\n\n\t\tif (!this.container)\n\t\t\treturn;\n\n\t\tvar elements = [...this.container.querySelectorAll('.js-rstuning-sortable')];\n\n\t\tfor (var i = 0; i < elements.length; i++)\n\t\t{\n\t\t\tSortable.create(elements[i], {\n\t\t\t\thandle: '.js-rstuning-sortable-handle',\n\t\t\t\tghostClass: \"rstuning__option__dd__ghost\",\n\t\t\t\tforceFallback: true,\n\t\t\t\tfallbackClass: 'rstuning__option__dd__fallback',\n\t\t\t\tonEnd: (event) => {\n\t\t\t\t\tvar arSortedResult = [];\n\t\t\t\t\t\t// rsTuningComponent = new RS.TuningComponent(),\n\t\t\t\t\t\t// tuningObj = rsTuningComponent.getTuningComponent();\n\n\n\t\t\t\t\t// if (this.container && this.options.ajaxReload)\n\t\t\t\t\t// {\n\t\t\t\t\t// \ttuningObj.setAttribute('data-reload', 'Y')\n\t\t\t\t\t// }\n\n\t\t\t\t\tvar elements = this.container.querySelectorAll('input[name=\"' + this.options.controlName + '[]\"]');\n\n\t\t\t\t\tif (elements && elements.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (i = 0; i < elements.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tarSortedResult.push(elements[i].value)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar event = new CustomEvent('rs.tuning.option.dd.onEnd', {'detail' : {'element': this.container, 'value': arSortedResult}});\n\t\t\t\t\tdocument.dispatchEvent(event);\n\n\t\t\t\t\trsTuningComponent.formSubmit();\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t}\n}\n"],"names":["DEFAULT","containerId","controlName","optionId","ajaxReload","RedsignTuningOptionDnD","options","document","addEventListener","init","bind","container","getElementById","elements","querySelectorAll","i","length","Sortable","create","handle","ghostClass","forceFallback","fallbackClass","onEnd","event","arSortedResult","push","value","CustomEvent","dispatchEvent","rsTuningComponent","formSubmit"],"mappings":";;;;;;;;CAIA,IAAMA,OAAO,GAAG;GACfC,WAAW,EAAE,EADE;GAEfC,WAAW,EAAE,EAFE;GAGfC,QAAQ,EAAE,EAHK;GAIfC,UAAU,EAAE;CAJG,CAAhB;AAOA,KAAaC,sBAAb;GAKC,kCACA;KAAA,IADYC,OACZ,uEADsB,EACtB;KAAA;KAAA,+CAJY,IAIZ;KAAA,8CAHW,EAGX;KACC,KAAKA,OAAL,mCAAmBN,OAAnB,GAA+BM,OAA/B;KAEAC,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,KAAKC,IAAL,CAAUC,IAAV,CAAe,IAAf,CAA9C;;;GATF;KAAA;KAAA,uBAaC;OAAA;;OACC,KAAKC,SAAL,GAAiBJ,QAAQ,CAACK,cAAT,CAAwB,KAAKN,OAAL,CAAaL,WAArC,CAAjB;OAEA,IAAI,CAAC,KAAKU,SAAV,EACC;OAED,IAAIE,QAAQ,kCAAO,KAAKF,SAAL,CAAeG,gBAAf,CAAgC,uBAAhC,CAAP,CAAZ;;OAEA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,QAAQ,CAACG,MAA7B,EAAqCD,CAAC,EAAtC,EACA;SACCE,QAAQ,CAACC,MAAT,CAAgBL,QAAQ,CAACE,CAAD,CAAxB,EAA6B;WAC5BI,MAAM,EAAE,8BADoB;WAE5BC,UAAU,EAAE,6BAFgB;WAG5BC,aAAa,EAAE,IAHa;WAI5BC,aAAa,EAAE,gCAJa;WAK5BC,KAAK,EAAE,eAACC,KAAD,EAAW;aACjB,IAAIC,cAAc,GAAG,EAArB,CADiB;;;;;;;aAWjB,IAAIZ,QAAQ,GAAG,KAAI,CAACF,SAAL,CAAeG,gBAAf,CAAgC,iBAAiB,KAAI,CAACR,OAAL,CAAaJ,WAA9B,GAA4C,MAA5E,CAAf;;aAEA,IAAIW,QAAQ,IAAIA,QAAQ,CAACG,MAAT,GAAkB,CAAlC,EACA;eACC,KAAKD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGF,QAAQ,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EACA;iBACCU,cAAc,CAACC,IAAf,CAAoBb,QAAQ,CAACE,CAAD,CAAR,CAAYY,KAAhC;;;;aAIF,IAAIH,KAAK,GAAG,IAAII,WAAJ,CAAgB,2BAAhB,EAA6C;eAAC,UAAW;iBAAC,WAAW,KAAI,CAACjB,SAAjB;iBAA4B,SAASc;;cAA9F,CAAZ;aACAlB,QAAQ,CAACsB,aAAT,CAAuBL,KAAvB;aAEAM,iBAAiB,CAACC,UAAlB;;UA7BF;;;;GAvBH;CAAA;;;;;;;;"}