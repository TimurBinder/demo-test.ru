window.JCCatalogStoreSKU=function(t){var s;if(t){this.config={id:t.ID,showEmptyStore:t.SHOW_EMPTY_STORE,useMinAmount:t.USE_MIN_AMOUNT,minAmount:t.MIN_AMOUNT},this.messages=t.MESSAGES,this.icons=t.ICONS,this.sku=t.SKU,this.stores=t.STORES,this.obStores={};for(s in this.stores)this.obStores[this.stores[s]]=BX(this.config.id+"_"+this.stores[s]);this.obTotal=BX(this.config.id+"_total"),BX.addCustomEvent(window,"onCatalogStoreProductChange",BX.proxy(this.offerOnChange,this))}},window.JCCatalogStoreSKU.prototype.offerOnChange=function(t){var s,i,o,n,e=this.sku[t],h=0;for(s in this.obStores)i=this.getStringCount(0,this.icons),o=this.config.useMinAmount?this.getStringCount(0,this.messages):"0",BX.adjust(BX.findChild(this.obStores[s],{className:"stock__icon"}),{html:i}),BX.adjust(BX.findChild(this.obStores[s],{className:"stock__val"}),{html:o}),e[s]&&(i=this.getStringCount(e[s],this.icons)+" ",o=this.config.useMinAmount?this.getStringCount(e[s],this.messages):e[s],BX.adjust(BX.findChild(this.obStores[s],{className:"stock__icon"}),{html:i}),BX.adjust(BX.findChild(this.obStores[s],{className:"stock__val"}),{html:o}),h+=e[s]),n=BX.findParent(this.obStores[s],{tagName:"li"}),this.config.showEmptyStore||e[s]>0?BX.show(n):BX.hide(n),e[s]>0?BX.removeClass(n,"is-empty"):BX.addClass(n,"is-empty");this.obTotal&&(i=this.getStringCount(h,this.icons),o=this.config.useMinAmount?this.getStringCount(h,this.messages):h,BX.adjust(BX.findChild(this.obTotal,{className:"stock__val"},!0),{html:o}),BX.adjust(BX.findChild(this.obTotal,{className:"stock__icon"}),{html:i}),BX.adjust(BX.findChild(this.obTotal,{className:"stock__val"}),{html:o}),h>0?BX.removeClass(this.obTotal.parentNode,"is-empty"):BX.addClass(this.obTotal.parentNode,"is-empty"))},window.JCCatalogStoreSKU.prototype.getStringCount=function(t,s){return 0==t?s.ABSENT:t>=this.config.minAmount?s.LOT_OF_GOOD:s.NOT_MUCH_GOOD};